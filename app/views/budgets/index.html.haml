.whole_page
  %h2 予算一覧
  - if @budgets.any?
    %div.panel.panel-default
      %div.panel-heading
        予算の合計値
      %div.panel-body
        #{@budgets.map(&:amount).sum.to_s(:delimited)} 円
    %br

  = link_to '予算の追加', new_budget_path, class: "btn btn-default block"

  %br

  %div
    %table.table
      %tr
        %th カテゴリ
        %th 予算
        %th
      - @categories.each do |category|
        %tr
          %td #{category.kind}
          - if category.budgets.any? && (budget = current_user.budgets.find_by(category_id: category.id))
            %td ¥#{budget.amount.to_s(:delimited)}
            %td #{link_to '編集', edit_budget_path(budget.id), class: "btn btn-default"}
          - else
            %td
            %td