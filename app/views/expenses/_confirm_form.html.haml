%div.whole_page
  %h3 以下の内容で追加する
  = form_with(model: expense, local: true) do |form|
    - if expense.errors.any?
      = render 'layouts/error', var: expense
    = form.hidden_field :amount
    - if controller.controller_name == 'repeat_expenses'
      = form.hidden_field :s_date
      = form.hidden_field :e_date
      = form.hidden_field :r_date
    - elsif controller.controller_name == 'expenses'
      = form.hidden_field :date
    = form.hidden_field :memo
    = form.hidden_field :category_id
    - if expense.percent == nil && expense.mypay != nil
      = form.hidden_field :percent, value: false
    - else
      = form.hidden_field :percent
    = form.hidden_field :mypay
    = form.hidden_field :partnerpay
    = form.hidden_field :both_flg


    .confirm_detail
      %div 金額：¥#{number_with_delimiter(expense.amount, delimiter: ",")}
      - if controller.controller_name == 'repeat_expenses'
        %div 開始日：#{expense.s_date.strftime("%Y/%m/%d(%a)")}
        %div 終了日：#{expense.e_date.strftime("%Y/%m/%d(%a)")}
        %div 毎月　#{expense.r_date}日
      - elsif controller.controller_name == 'expenses'
        %div 日付：#{expense.date.strftime("%Y/%m/%d(%a)")}
      %div メモ：#{expense.memo}
      %div カテゴリ：#{Category.find(expense.category_id).kind}
      - if expense.both_flg == true && expense.percent != nil
        %div 自分の割合：#{which_percent(expense.percent)}
      - elsif expense.both_flg == true && expense.percent == nil
        %div 自分の金額：¥#{number_with_delimiter(expense.mypay, delimiter: ",")}
        %div 相手の金額：¥#{number_with_delimiter(expense.partnerpay, delimiter: ",")}
    %br
    = form.submit '入力する', class: 'btn btn-default btn-confirm'
  %br



  = form_with(model: expense, local: true, url: back_new_or_both(expense), method: :get) do |form|
    = form.hidden_field :amount
    - if controller.controller_name == 'repeat_expenses'
      = form.hidden_field :s_date
      = form.hidden_field :e_date
      = form.hidden_field :r_date
    - elsif controller.controller_name == 'expenses'
      = form.hidden_field :date
    = form.hidden_field :memo
    = form.hidden_field :category_id
    - if expense.percent == nil && expense.mypay != nil
      = form.hidden_field :percent, value: false
    - else
      = form.hidden_field :percent
    = form.hidden_field :mypay
    = form.hidden_field :partnerpay
    = form.hidden_field :both_flg
    = form.submit '戻る', name: 'back', class: 'btn btn-back'
  -# 出費フォーム
